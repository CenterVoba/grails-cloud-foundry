<html>
    <head>
        <title>Cloud Foundry Plugin 1.0 - Reference Documentation</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Style" charset="utf-8"/>
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    </head>
    <body class="body">
        <div id="header">
            <div class="images"><br/><br/>
                <a href="http://grails.org" target="_blank"><img alt="The Grails Framework" src="../img/grails.png" border="0"/></a>
                <span style="right:30px; top:20px; position:absolute;">
                    <a href="../index.html" target="_top">Frames</a> | <a href="index.html" target="_top">No Frames</a><br/><br/>
                    <a href="http://springsource.com" target="_blank"><img alt="SpringSource - A Division of VMware" src="../img/springsource-logo.png" border="0"/></a>
                </span>
            </div>
            <div class="message">cloud-foundry</div>
            <h1>Cloud Foundry Plugin - Reference Documentation</h1>
            <p><strong>Authors:</strong> Burt Beckwith</p>
            <p><strong>Version:</strong> 1.0</p>
            <em></em>
        </div>

        <div id="toc">
            <h2>Table of Contents</h2>
            <div class="tocItem" style="margin-left:0px"><a href="#1 Introduction to the Cloud Foundry Plugin">1 Introduction to the Cloud Foundry Plugin</a></div><div class="tocItem" style="margin-left:10px"><a href="#1.1 History">1.1 History</a></div><div class="tocItem" style="margin-left:0px"><a href="#2 Getting Started">2 Getting Started</a></div><div class="tocItem" style="margin-left:0px"><a href="#3 Configuration">3 Configuration</a></div><div class="tocItem" style="margin-left:0px"><a href="#4 Deploying applications">4 Deploying applications</a></div><div class="tocItem" style="margin-left:0px"><a href="#5 Updating applications and services">5 Updating applications and services</a></div><div class="tocItem" style="margin-left:0px"><a href="#6 Monitoring">6 Monitoring</a></div><div class="tocItem" style="margin-left:0px"><a href="#7 Service Configuration">7 Service Configuration</a></div><div class="tocItem" style="margin-left:0px"><a href="#8 Troubleshooting">8 Troubleshooting</a></div>
        </div>
        <div id="content">
            <h1><a name="1 Introduction to the Cloud Foundry Plugin">1 Introduction to the Cloud Foundry Plugin</a></h1>The Cloud Foundry plugin makes it easy to deploy, update and monitor Grails applications in Cloud Foundry. It has the same feature set as the "vmc" commandline Ruby client that Rails and Node.js users will be using. There's also support in SpringSource Tool Suite (STS) via a plugin.<p class="paragraph"/>The benefit of using this plugin versus the vmc client or STS is that the plugin is very Grails-aware. It makes several assumptions that reduce the amount of typing you need to do, for example you don't need to type the application name since it defaults to your Grails application name (although you can configure the deployed name in Config.groovy, or override the application name with the <code>--appname</code> commandline argument).<p class="paragraph"/><blockquote class="note">
Use the <a href="http://grails.org/doc/latest/ref/Command%20Line/interactive.html" target="blank">interactive</a> script when you're running multiple Cloud Foundry scripts - it will significantly reduce the startup time for each command you run once the initial JVM has started.
</blockquote><p class="paragraph"/><h2><a name="1.1 History">1.1 History</a></h2><h4>History</h4>
<ul class="star">
<li>July 13, 2011</li>
<ul class="star">
<li>1.0 release</li>
</ul>
<li>April 29, 2011</li>
<ul class="star">
<li>1.0.0.M3 release</li>
<li>Fixed support for RabbitMQ</li>
</ul>
<li>April 21, 2011</li>
<ul class="star">
<li>1.0.0.M2 release</li>
<li>Added cf-env, cf-env-add, cf-del, cf-frameworks, and cf-runtimes scripts</li>
</ul>
<li>April 12, 2011</li>
<ul class="star">
<li>1.0.0.M1 release</li>
</ul></ul><p class="paragraph"/><h1><a name="2 Getting Started">2 Getting Started</a></h1><h4>The first step is to install the plugin:</h4><p class="paragraph"/><div class="code"><pre>grails install&#45;plugin cloud&#45;foundry</pre></div><p class="paragraph"/>Add your Cloud Foundry credentials to <code>grails-app/conf/Config.groovy</code>, or an external config file referenced from <code>Config.groovy</code>, or in <code>$HOME/.grails/settings.groovy</code>:<p class="paragraph"/><div class="code"><pre>grails.plugin.cloudfoundry.username = 'your.email@server.com'
grails.plugin.cloudfoundry.password = 's3kr3t'</pre></div><p class="paragraph"/>If you want to deploy with a different application name than your Grails application name, specify it with the <code>grails.plugin.cloudfoundry.appname</code> property:<p class="paragraph"/><div class="code"><pre>grails.plugin.cloudfoundry.appname = 'my&#45;cool&#45;app'</pre></div><p class="paragraph"/>There are other configuration options, but next you'll want to provision some services and deploy your application. See section <a href="../guide/single.html#4 Deploying applications" class="guide">4 Deploying applications</a> for details on that.
<h1><a name="3 Configuration">3 Configuration</a></h1>There are a few configuration options for the plugin. All are specified in Config.groovy, but you can put the values for <code>grails.plugin.cloudfoundry.username</code> and/or <code>grails.plugin.cloudfoundry.password</code> in <code>$HOME/.grails/settings.groovy</code> to avoid storing this information in source control.<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>grails.plugin.cloudfoundry.username</td><td>none, must be specified</td><td>the username/email address for your account</td></tr><tr class="table-even"><td>grails.plugin.cloudfoundry.password</td><td>none, must be specified</td><td>the password for your account</td></tr><tr class="table-odd"><td>grails.plugin.cloudfoundry.target</td><td><code>'api.cloudfoundry.com'</code></td><td>the cloud API server, e.g. <code>'api.cloudfoundry.com'</code></td></tr><tr class="table-even"><td>grails.plugin.cloudfoundry.appname</td><td>application name</td><td>the application name for scripts; defaults to the current application name but can be specified in Config.groovy or overridden from the commandline with the <code>--appname</code> attribute</td></tr><tr class="table-odd"><td>grails.plugin.cloudfoundry.showStackTrace</td><td><code>false</code></td><td>if <code>true</code> show error stack traces in the console</td></tr><tr class="table-even"><td>grails.plugin.cloudfoundry.testStartWithGet</td><td><code>true</code></td><td>whether to test a start or restart with a GET request in addition to checking the reported status from the server to avoid false positives</td></tr><tr class="table-odd"><td>grails.plugin.cloudfoundry.testStartGetUrl</td><td>application url</td><td>the url to test if <code>grails.plugin.cloudfoundry.testStartWithGet</code> is <code>true</code></td></tr><tr class="table-even"><td>grails.plugin.cloudfoundry.datasource.disableTimeoutAutoconfiguration</td><td><code>false</code></td><td>disables auto-configuration of MySQL datasource connection timeout checking if <code>true</code></td></tr></table>
<h1><a name="4 Deploying applications">4 Deploying applications</a></h1><h2>Initial state</h2><p class="paragraph"/>When you initially start you won't have any configured services or applications. Running the <a href="../ref/Scripts/cf-services.html" class="Scripts">cf-services</a> script should display something similar to this:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;services<p class="paragraph"/>============== <span class="java&#45;object">System</span> Services ==============<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Service  | Version | Description                   |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| mongodb  | 1.8     | MongoDB NoSQL store           |
| redis    | 2.2     | Redis key&#45;value store service |
| mysql    | 5.1     | MySQL database service        |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+<p class="paragraph"/>=========== Provisioned Services ============<p class="paragraph"/>None provisioned yet.</pre></div><p class="paragraph"/>All of the available services are listed first, and then your configured service instances, if any.<p class="paragraph"/>If you run the <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> script you should see that there are no applications:<p class="paragraph"/><div class="code"><pre>No applications available.</pre></div><p class="paragraph"/>And if you run the <a href="../ref/Scripts/cf-info.html" class="Scripts">cf-info</a> script you should see that there are no resources in use:<p class="paragraph"/><div class="code"><pre>VMware's Cloud Application Platform
For support visit support&#64;cloudfoundry.com<p class="paragraph"/>Target:   http://api.cloudfoundry.com (v0.999)<p class="paragraph"/>User:     your.email@yourserver.com
Usage:    Memory   (0B of 2.0G total)
          Services (0 of 16 total)
          Apps     (0 of 20 total)</pre></div><p class="paragraph"/><h2>Services</h2><p class="paragraph"/>Before deploying your application, you'll probably need to configure at least one service, e.g. a MySQL, MongoDB, or Redis database. Use the <a href="../ref/Scripts/cf-create-service.html" class="Scripts">cf-create-service</a> script for that, e.g.<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;create&#45;service mysql<p class="paragraph"/>Service 'mysql&#45;2f5fb76' provisioned.</pre></div><p class="paragraph"/>or<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;create&#45;service redis<p class="paragraph"/>Service 'redis&#45;364841f' provisioned.</pre></div><p class="paragraph"/>By default a name is generated for you, but you can choose the name, and also bind it to an existing application. You can also bind a service to an application when you deploy the application.<p class="paragraph"/>Re-running the <a href="../ref/Scripts/cf-services.html" class="Scripts">cf-services</a> script will display the new services:<p class="paragraph"/><div class="code"><pre>============== <span class="java&#45;object">System</span> Services ==============<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Service  | Version | Description                   |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| mongodb  | 1.8     | MongoDB NoSQL store           |
| redis    | 2.2     | Redis key&#45;value store service |
| mysql    | 5.1     | MySQL database service        |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+<p class="paragraph"/>=========== Provisioned Services ============<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Name            | Service |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| mysql&#45;2f5fb76   | mysql   |
| redis&#45;364841f   | redis   |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-delete-service.html" class="Scripts">cf-delete-service</a> script to delete a service:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;delete&#45;service redis&#45;364841f<p class="paragraph"/>Successfully removed service: redis&#45;364841f</pre></div><p class="paragraph"/><h2>Applications</h2><p class="paragraph"/>The <a href="../ref/Scripts/cf-push.html" class="Scripts">cf-push</a> script creates an application. It deploys a war file and optionally binds one or more services, and has options to configure the allocated memory and associated URLs. By default it also starts the application but you can deploy it without starting if you want to perform configuration steps after creating the application.<p class="paragraph"/>The default memory allocation is 512MB but this can be overridden when running the script or changed later.<p class="paragraph"/>You can use an existing war file but if one isn't specified then a war is built for you.<p class="paragraph"/><blockquote class="warning">
Most scripts are not environment-specific but cf-push builds a war file, so be sure to specify the environment.
</blockquote><p class="paragraph"/>A typical deploy command would be<p class="paragraph"/><div class="code"><pre>&#36; grails prod cf&#45;push &#45;&#45;services=mysql&#45;2f5fb76</pre></div><p class="paragraph"/>or if you're running the <a href="http://grails.org/doc/latest/ref/Command%20Line/interactive.html" target="blank">interactive</a> script:<p class="paragraph"/><div class="code"><pre>prod cf&#45;push &#45;&#45;services=mysql&#45;2f5fb76</pre></div><p class="paragraph"/>and you should see output similar to<p class="paragraph"/><div class="code"><pre>Environment set to production
Building war file
     &#91;gspc&#93; Compiling 13 GSP files <span class="java&#45;keyword">for</span> <span class="java&#45;keyword">package</span> &#8230;
&#8230;
Building WAR file &#8230;
     &#91;copy&#93; Copying 633 files to &#8230;
&#8230;
&#91;propertyfile&#93; Updating property file: &#8230;
&#8230;
      &#91;jar&#93; Building jar: .../target/cf&#45;temp&#45;1299173015209.war
&#8230;
Done creating WAR ...target/cf&#45;temp&#45;1299173015209.war<p class="paragraph"/>Application Deployed URL: 'myappname.cloudfoundry.com'?<p class="paragraph"/>Uploading Application Information.
Trying to start Application: 'myappname'.
..................<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/>Running <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> should display something like this:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Services      |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 1  | RUNNING | myappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>You might also omit the service bindings and deploy without starting:
<div class="code"><pre>grails prod cf&#45;push &#45;&#45;no&#45;start</pre></div><p class="paragraph"/>or use a pre-built war:
<div class="code"><pre>grails prod cf&#45;push &#45;&#45;warfile=target/myappname.war</pre></div><p class="paragraph"/>Note that the war file name has no bearing on the deployed url - the war is deployed as the default ('ROOT') context in Tomcat.<p class="paragraph"/><h4>Automatic binding and provisioning</h4><p class="paragraph"/>You can also let the plugin discover required services for you. The plugin will determine that you probably need a MySQL database if you have the Hibernate plugin, a MongoDB instance if you have the Mongo plugin, and a Redis instance if you have that plugin.<p class="paragraph"/>If you specify a service of the correct type (with the <code>--services</code> attribute) then it'll be used, otherwise if you need one and have one provisioned it will be suggested to you, e.g.<p class="paragraph"/><div class="code"><pre>Would you like to bind the 'mysql&#45;2f5fb76' service? (&#91;y&#93;, n)</pre></div><p class="paragraph"/>and if you need one and don't have one provisioned, the plugin will offer to provision and bind one for you, e.g.<p class="paragraph"/><div class="code"><pre>Would you like to create and bind a redis service? (&#91;y&#93;, n)</pre></div><p class="paragraph"/><h1><a name="5 Updating applications and services">5 Updating applications and services</a></h1><h2>Updating applications</h2><p class="paragraph"/>Once an application has been created, there are several options for making changes to it:
<ul class="star">
<li>binding and unbinding services</li>
<li>mapping and unmapping URLs</li>
<li>increasing or decreasing the number of running instances</li>
<li>increasing or decreasing the amount of memory allocated</li>
</ul><p class="paragraph"/><h4>Services</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-bind-service.html" class="Scripts">cf-bind-service</a> script to associate an existing service instance with your application:<p class="paragraph"/><div class="code"><pre>grails cf&#45;bind&#45;service mongodb&#45;eaa5601</pre></div><p class="paragraph"/>or if you're running the <a href="http://grails.org/doc/latest/ref/Command%20Line/interactive.html" target="blank">interactive</a> script:<p class="paragraph"/><div class="code"><pre>cf&#45;bind&#45;service mongodb&#45;eaa5601</pre></div><p class="paragraph"/><div class="code"><pre>Creating <span class="java&#45;keyword">new</span> service binding to 'mongodb&#45;eaa5601' <span class="java&#45;keyword">for</span> 'myappname'.<p class="paragraph"/>Application 'myappname' updated
Service 'mongodb&#45;eaa5601' added<p class="paragraph"/>Application 'myappname' stopped.<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/>If you run <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> you'll see that the service is registered:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Services                       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 1  | RUNNING | myappname.cloudfoundry.com | mysql&#45;2f5fb76, mongodb&#45;eaa5601 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-unbind-service.html" class="Scripts">cf-unbind-service</a> script to remove an existing service instance from your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;unbind&#45;service mongodb&#45;eaa5601<p class="paragraph"/>Removing service binding 'mongodb&#45;eaa5601' from 'myappname'.<p class="paragraph"/>Application 'myappname' updated
Service 'serviceName' removed<p class="paragraph"/>Application 'myappname' stopped.<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/>If you run <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> you'll see that the service is no longer registered:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Service       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 1  | RUNNING | myappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/><h4>URLs</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-map.html" class="Scripts">cf-map</a> script to associate an additional URL with your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;map myotherappname.cloudfoundry.com<p class="paragraph"/>Succesfully mapped url</pre></div><p class="paragraph"/>If you run <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> you'll see that the extra URL is mapped:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                                                        | Service       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 1  | RUNNING | myappname.cloudfoundry.com, myotherappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-unmap.html" class="Scripts">cf-unmap</a> script to remove a URL from your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;unmap myotherappname.cloudfoundry.com<p class="paragraph"/>Succesfully unmapped url</pre></div><p class="paragraph"/>If you run <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> you'll see that the URL is no longer mapped:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Service       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 1  | RUNNING | myappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/><h4>Instances</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-update-instances.html" class="Scripts">cf-update-instances</a> script to increase or decrease the number of running instances of your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;update&#45;instances 3<p class="paragraph"/>Scaled 'myappname' up to 3 instance(s).</pre></div><p class="paragraph"/>It will take a short amount of time to start the new instances, so if you run <a href="../ref/Scripts/cf-apps.html" class="Scripts">cf-apps</a> you'll see that the extra instances are allocated but not all are running yet:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Service       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 3  | 33%     | myappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Wait a while longer and all should be running:<p class="paragraph"/><div class="code"><pre>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Application | &#35;  | Health  | URLs                       | Service       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname   | 3  | RUNNING | myappname.cloudfoundry.com | mysql&#45;2f5fb76 |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>If you have a test page that displays the environment variables VCAP_APP_HOST and VCAP_APP_PORT you'll see that you're automatically load-balanced randomly between the instances when you refresh your browser:<p class="paragraph"/><div class="code"><pre>VCAP_APP_HOST 	10.114.110.207
VCAP_APP_PORT 	48684</pre></div><p class="paragraph"/><div class="code"><pre>VCAP_APP_HOST 	10.114.110.208
VCAP_APP_PORT 	47793</pre></div><p class="paragraph"/><div class="code"><pre>VCAP_APP_HOST 	10.114.110.209
VCAP_APP_PORT 	58232</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-show-instances.html" class="Scripts">cf-show-instances</a> script to display information about the instances:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;show&#45;instances<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Index | State   | Start Time         |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| 0     | RUNNING | 04/12/2011 11:33AM |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| 1     | RUNNING | 04/12/2011 11:33AM |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| 2     | RUNNING | 04/12/2011 11:33AM |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-stats.html" class="Scripts">cf-stats</a> script to display runtime information about the instances:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;stats<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Instance | CPU (Cores) | Memory (limit) | Disk (limit) | Uptime       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| 0        | 9.5% (4)    | 372.7M (512M)  | 52.6M (2G)   | 0d:0h:1m:12s |
| 1        | 3.3% (4)    | 375.7M (512M)  | 52.6M (2G)   | 0d:0h:1m:53s |
| 2        | 3.7% (4)    | 383.2M (512M)  | 52.6M (2G)   | 0d:0h:1m:55s |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>You can also scale the number down:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;update&#45;instances 1<p class="paragraph"/>Scaled 'myappname' down to 1 instance(s).</pre></div><p class="paragraph"/><h4>Memory</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-update-memory.html" class="Scripts">cf-update-memory</a> script to increase or decrease the allocated memory for your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;update&#45;memory 1G<p class="paragraph"/>Updated memory reservation to '1.0G'.<p class="paragraph"/>Application 'myappname' stopped.<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/>Note that the memory must be one of 64M, 128M, 256M, 512M, 1G, or 2G.<p class="paragraph"/><h4>Start, stop, restart</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-stop.html" class="Scripts">cf-stop</a> script to stop your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;stop<p class="paragraph"/>Application 'myappname' stopped.</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-start.html" class="Scripts">cf-start</a> script to start your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;start<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-restart.html" class="Scripts">cf-restart</a> script to stop and then start your application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;restart<p class="paragraph"/>Application 'myappname' stopped.<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/><h4>Updating</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-update.html" class="Scripts">cf-update</a> script to redeploy an application after making code changes:<p class="paragraph"/><div class="code"><pre>&#36; grails prod cf&#45;update<p class="paragraph"/>Uploading Application.
Building war file
     &#91;gspc&#93; Compiling 13 GSP files <span class="java&#45;keyword">for</span> <span class="java&#45;keyword">package</span> &#8230;
&#8230;
Building WAR file &#8230;
     &#91;copy&#93; Copying 635 files to &#8230;
&#8230;
&#91;propertyfile&#93; Updating property file: &#8230;
&#8230;
      &#91;jar&#93; Building jar: .../target/cf&#45;temp&#45;1299178697861.war
&#8230;
Done creating WAR ...target/cf&#45;temp&#45;1299178697861.war<p class="paragraph"/>Application 'myappname' stopped.<p class="paragraph"/>Trying to start Application: 'myappname'.
.<p class="paragraph"/>Application 'myappname' started.</pre></div><p class="paragraph"/><blockquote class="warning">
Most scripts are not environment-specific but cf-update builds a war file, so be sure to specify the environment.
</blockquote><p class="paragraph"/>Like the <a href="../ref/Scripts/cf-push.html" class="Scripts">cf-push</a> script you can either let the script create a war file for you, or specify an existing one.<p class="paragraph"/><h4>Deleting applications</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-delete-app.html" class="Scripts">cf-delete-app</a> script to delete an application:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;delete&#45;app<p class="paragraph"/>Application 'myappname' deleted.</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-delete-all-apps.html" class="Scripts">cf-delete-all-apps</a> script to delete all applications:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;delete&#45;all&#45;apps<p class="paragraph"/>Application 'myappname1' deleted.<p class="paragraph"/>Application 'myappname2' deleted.<p class="paragraph"/>Application 'myappname3' deleted.</pre></div><p class="paragraph"/><h1><a name="6 Monitoring">6 Monitoring</a></h1><h4>Crashes</h4><p class="paragraph"/>If a deployment or update fails, the script will display the application logs but you can view crash information and logs at any time.<p class="paragraph"/>Use the <a href="../ref/Scripts/cf-crashes.html" class="Scripts">cf-crashes</a> script to check if there have been recent crashes:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;crashes<p class="paragraph"/>+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| Name        | Instance ID                          | Crashed Time       |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+
| myappname&#45;1 | 9f3e61c9&#45;7c64&#45;4e57&#45;ab3e&#45;8d7e892dd722 | 04/11/2011 02:43PM |
| myappname&#45;2 | 17b6470c&#45;6444&#45;49f4&#45;8981&#45;d3bd7d7796dc | 04/11/2011 02:43PM |
| myappname&#45;3 | d1b99f31&#45;203c&#45;48e3&#45;aa17&#45;17ca26178a49 | 04/11/2011 02:44PM |
+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;+</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-crashlogs.html" class="Scripts">cf-crashlogs</a> script to view log files for crashed instances:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;crashlogs<p class="paragraph"/>==== logs/stdout.log ====<p class="paragraph"/>2011&#45;03&#45;03 14:50:23,904 &#91;main&#93; ERROR context.ContextLoader  &#45; Context initialization failed
org.springframework.beans.factory.access.BootstrapException: Error executing bootstraps; nested exception is java.lang.NullPointerException
        at org.codehaus.groovy.grails.web.context.GrailsContextLoader.createWebApplicationContext(GrailsContextLoader.java:87)
&#8230;
Caused by: java.lang.NullPointerException
        at $Proxy13.save(Unknown Source)
&#8230;
Stopping Tomcat because the context stopped.</pre></div><p class="paragraph"/><h4>Logs</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-logs.html" class="Scripts">cf-logs</a> script to view log files:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;logs<p class="paragraph"/>==== logs/stderr.log ====<p class="paragraph"/>Mar 3, 2011 2:51:32 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http&#45;50478
&#8230;
INFO: Server startup in 9169 ms<p class="paragraph"/>
==== logs/stdout.log ====</pre></div><p class="paragraph"/>By default all logs are displayed, but you can limit it to one or more:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;logs &#45;&#45;stderr<p class="paragraph"/>==== logs/stderr.log ====<p class="paragraph"/>Mar 3, 2011 2:51:32 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http&#45;50478
&#8230;
INFO: Server startup in 9169 ms</pre></div><p class="paragraph"/>And you can also write a log to a file instead of the console:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;logs target/myapp.stderr.log &#45;&#45;stderr<p class="paragraph"/>Wrote logs/stderr.log to target/myapp.stderr.log</pre></div><p class="paragraph"/><h4>Viewing files</h4><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-list-files.html" class="Scripts">cf-list-files</a> script to view directory listings:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;list&#45;files /<p class="paragraph"/>logs/                                        &#45;
tomcat/                                      &#45;</pre></div><p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;list&#45;files tomcat<p class="paragraph"/>bin/                                         &#45;
conf/                                        &#45;
lib/                                         &#45;
logs/                                        &#45;
temp/                                        &#45;
webapps/                                     &#45;
work/                                        &#45;</pre></div><p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;list&#45;files tomcat/webapps<p class="paragraph"/>ROOT/                                        &#45;</pre></div><p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;list&#45;files tomcat/webapps/ROOT<p class="paragraph"/>META&#45;INF/                                    &#45;
WEB&#45;INF/                                     &#45;
css/                                         &#45;
images/                                      &#45;
js/                                          &#45;
plugins/</pre></div><p class="paragraph"/>Use the <a href="../ref/Scripts/cf-get-file.html" class="Scripts">cf-get-file</a> script to view a file:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;get&#45;file tomcat/webapps/ROOT/css/main.css<p class="paragraph"/>html &#42; &#123;
    margin: 0;
    /&#42;padding: 0; SELECT NOT DISPLAYED CORRECTLY IN FIREFOX &#42;/
&#125;<p class="paragraph"/>...</pre></div><p class="paragraph"/>And you can also write the contents to a file instead of the console:<p class="paragraph"/><div class="code"><pre>&#36; grails cf&#45;get&#45;file tomcat/webapps/ROOT/css/main.css target/main.css<p class="paragraph"/>Wrote tomcat/webapps/ROOT/css/main.css to target/main.css</pre></div><p class="paragraph"/><h1><a name="7 Service Configuration">7 Service Configuration</a></h1>When you provision a service and bind it to an application, an environment variable <code>VCAP_SERVICES</code> is set for your server instance(s). This is a JSON string and you can use it to configure your DataSource, MongoDB, and Redis connections and will look something like this (formatted for readability):<p class="paragraph"/><div class="code"><pre>&#123;<span class="java&#45;quote">"redis&#45;2.2"</span>:
   &#91;&#123;<span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"redis&#45;1d8e28a"</span>,
     <span class="java&#45;quote">"label"</span>:<span class="java&#45;quote">"redis&#45;2.2"</span>,
     <span class="java&#45;quote">"plan"</span>:<span class="java&#45;quote">"free"</span>,
     <span class="java&#45;quote">"credentials"</span>:&#123;
         <span class="java&#45;quote">"node_id"</span>:<span class="java&#45;quote">"redis_node_3"</span>,
         <span class="java&#45;quote">"hostname"</span>:<span class="java&#45;quote">"172.30.48.42"</span>,
         <span class="java&#45;quote">"port"</span>:5004,
         <span class="java&#45;quote">"password"</span>:<span class="java&#45;quote">"1463d9d0&#45;4e35&#45;4f2e&#45;be2f&#45;01dc5536f183"</span>,
         <span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"redis&#45;1a69a915&#45;6522&#45;496c&#45;93d5&#45;1271d2b3118e"</span>&#125;
     &#125;&#93;,
 <span class="java&#45;quote">"mongodb&#45;1.8"</span>:
   &#91;&#123;<span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"mongodb&#45;3854dbe"</span>,
     <span class="java&#45;quote">"label"</span>:<span class="java&#45;quote">"mongodb&#45;1.8"</span>,
     <span class="java&#45;quote">"plan"</span>:<span class="java&#45;quote">"free"</span>,
     <span class="java&#45;quote">"credentials"</span>:&#123;
         <span class="java&#45;quote">"hostname"</span>:<span class="java&#45;quote">"172.30.48.63"</span>,
         <span class="java&#45;quote">"port"</span>:25003,
         <span class="java&#45;quote">"username"</span>:<span class="java&#45;quote">"b6877670&#45;da98&#45;4124&#45;85ca&#45;84357f042797"</span>,
         <span class="java&#45;quote">"password"</span>:<span class="java&#45;quote">"f53e6a4b&#45;f4b8&#45;497d&#45;ac81&#45;43cb22cf1e88"</span>,
         <span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"mongodb&#45;9dda2cfb&#45;9672&#45;4d58&#45;8786&#45;98c3abcb21ec"</span>,
         <span class="java&#45;quote">"db"</span>:<span class="java&#45;quote">"db"</span>&#125;
   &#125;&#93;,
 <span class="java&#45;quote">"mysql&#45;5.1"</span>:
   &#91;&#123;<span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"mysql&#45;497b12e"</span>,
     <span class="java&#45;quote">"label"</span>:<span class="java&#45;quote">"mysql&#45;5.1"</span>,
     <span class="java&#45;quote">"plan"</span>:<span class="java&#45;quote">"free"</span>,
     <span class="java&#45;quote">"credentials"</span>:&#123;
         <span class="java&#45;quote">"node_id"</span>:<span class="java&#45;quote">"mysql_node_8"</span>,
         <span class="java&#45;quote">"hostname"</span>:<span class="java&#45;quote">"172.30.48.27"</span>,
         <span class="java&#45;quote">"port"</span>:3306,
         <span class="java&#45;quote">"password"</span>:<span class="java&#45;quote">"p3rO5K5lRZaEU"</span>,
         <span class="java&#45;quote">"name"</span>:<span class="java&#45;quote">"d887d4f5664f64dde86f3ce42c6333962"</span>,
         <span class="java&#45;quote">"user"</span>:<span class="java&#45;quote">"umuPIJ8IzSKVA"</span>&#125;
     &#125;&#93;
&#125;</pre></div><p class="paragraph"/>Fortunately the plugin manages this for you, so in general you don't need to be aware of this. It will update your DataSource configuration if you have a MySQL service provisioned and bound, and likewise your MongoDB and Redis connection information if you have those plugins installed and have those services provisioned and bound.<p class="paragraph"/>If you're not using the MongoDB or Redis plugin then you'll need to access the information yourself - just call <code>System.getenv('VCAP_SERVICES')</code> and parse the JSON.<p class="paragraph"/><h4>DataSource</h4>
In addition to replacing the username, password, and JDBC url for your DataSource, the plugin will configure MySQL connection testing, using the following settings:<p class="paragraph"/><div class="code"><pre>removeAbandoned = <span class="java&#45;keyword">true</span>
removeAbandonedTimeout = 300 // 5 minutes
testOnBorrow = <span class="java&#45;keyword">true</span>
validationQuery = '/&#42; ping &#42;/ SELECT 1'</pre></div><p class="paragraph"/>This will only be done if the DataSource is the standard <code>org.apache.commons.dbcp.BasicDataSource</code> that Grails configures since we assume that if you have customized the DataSource, you will configure connection testing yourself. You can also tell the plugin to not make these changes with<p class="paragraph"/><div class="code"><pre>grails.plugin.cloudfoundry.datasource.disableTimeoutAutoconfiguration = <span class="java&#45;keyword">true</span></pre></div><p class="paragraph"/>in <code>Config.groovy</code>.<p class="paragraph"/>You should specify the <code>Dialect</code> to ensure that the correct table type is used. InnoDB tables are preferred since MyISAM tables do not support transactions, so it's a good idea to use the <code>MySQLInnoDBDialect</code>. In addition you can customize the JDBC url (for example to use UTF-8). The best way to configure these is to populate the <code>production</code> settings (or whichever environment you're using for deployment) with these values, for example:<p class="paragraph"/><div class="code"><pre>production &#123;
   dataSource &#123;
      dialect = org.hibernate.dialect.MySQLInnoDBDialect
      driverClassName = 'com.mysql.jdbc.Driver'
      username = 'n/a'
      password = 'n/a'
      url = 'jdbc:mysql://localhost/db?useUnicode=<span class="java&#45;keyword">true</span>&#38;characterEncoding=utf8'
      dbCreate = 'update'
   &#125;
&#125;</pre></div><p class="paragraph"/><code>username</code> and <code>password</code> will be replaced but can't be blank or missing, so they're set to dummy values. In addition the part of the URL to the left of the ? character will be replaced, so that just has to be valid syntax but doesn't need to be a real database. The part to the right of the ? (<code>"useUnicode=true&#38;characterEncoding=utf8"</code>) will be appended to the auto-generated URL.<p class="paragraph"/><h4>Searchable</h4><p class="paragraph"/>Although there's no explicit support for Compass in Cloud Foundry, the plugin does detect that the Searchable plugin is installed and will configure it to write its Lucene index to a writeable directory on your server.
<h1><a name="8 Troubleshooting">8 Troubleshooting</a></h1>You can enable logging of the JSON responses from client calls by setting the <code>grails.plugin.cloudfoundry.Scripts</code> category to the <code>debug</code> level in your log4j configuration, e.g.<p class="paragraph"/><div class="code"><pre>debug 'grails.plugin.cloudfoundry.Scripts'</pre></div><p class="paragraph"/>You can also log all client method calls with<p class="paragraph"/><div class="code"><pre>trace 'grails.plugin.cloudfoundry.ClientWrapper'</pre></div><p class="paragraph"/>Some exceptions will always show a stack trace, but others are somewhat expected and just the error messages are displayed, but you can print all stacktraces by adding this to <code>Config.groovy</code><p class="paragraph"/><div class="code"><pre>grails.plugin.cloudfoundry.showStackTrace = <span class="java&#45;keyword">true</span></pre></div>

        </div>
        <div id="footer">
             
        </div>
    
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16219500-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</body>
</html>
